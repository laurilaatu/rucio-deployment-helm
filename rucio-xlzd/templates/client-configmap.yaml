{{- if .Values.client.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: rucio-client-config
data:
  rucio.cfg: |
    [client]
    rucio_host = {{ .Values.client.config.rucio_host }}
    auth_host = {{ .Values.client.config.auth_host }}
    auth_type = {{ .Values.client.config.auth_type }}
    account = {{ required "client.config.account is required!" .Values.client.config.account }}
    ca_cert = /etc/ca-certs/ca.cert.pem
    # These paths point to where the user secret will be mounted inside the pod
    client_cert = /opt/rucio/certs/user/usercert.pem
    client_key = /opt/rucio/certs/user/userkey.pem
    request_retries = 3

    [policy]
    permission = generic
    schema = generic
    lfn2pfn_algorithm_default = hash
    support = https://github.com/rucio/rucio/issues/
    support_rucio = https://github.com/rucio/rucio/issues/
{{- end }}